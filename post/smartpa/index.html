<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>关于SmartPA | LC908</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://lc908.github.io//favicon.ico?v=1633963198797">
<link rel="stylesheet" href="https://lc908.github.io//styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="摘要

2.1、功率放大电路
功率放大电路：能够驱动较重负载，向外提供较大输出功率的放大电路。
关键指标：a）最大输出功率；b）转换效率；c）失真
不同类型的功率放大电路
1）Class A
A类功放：在输入信号的一个周期内，晶体管一直处于..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://lc908.github.io/">
        <img src="https://lc908.github.io//images/avatar.png?v=1633963198797" class="site-logo">
        <h1 class="site-title">LC908</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      温故而知新
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://lc908.github.io//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">关于SmartPA</h2>
            <div class="post-date">2021-10-11</div>
            
            <div class="post-content" v-pre>
              <p>摘要</p>
<!-- more -->
<h1 id="21-功率放大电路">2.1、功率放大电路</h1>
<p>功率放大电路：能够驱动较重负载，向外提供较大输出功率的放大电路。<br>
关键指标：a）最大输出功率；b）转换效率；c）失真</p>
<p>不同类型的功率放大电路<br>
1）Class A<br>
A类功放：在输入信号的一个周期内，晶体管一直处于放大区，其导通角为360°，即便输入信号为0，晶体管也在燃烧电力，A类功放是晶体管功率放大电路中最保真的，功耗也最大。</p>
<p>特点：<br>
a）静态功耗高，发热严重：无论有无输入信号，晶体管都处于放大区，Rc持续流过静态电流；<br>
b）输入伏安特性存在严重的非线性（大信号失真），导致输出也存在严重的谐波失真；<br>
很多大功率高品质功率放大电路，仍采用分立晶体管实现，甚至使用电子管实现，分别称之为石机和胆机。此类放大电路多采用的是A类功放。</p>
<p>参考文献——第一个成型的晶体管A类放大器：<br>
《Simple Class A Amplifier: A 10-W design  giving subjectively better results than Class B transistor amplifiers》</p>
<p>2）Class B &amp; Class AB<br>
B类互补功放，用两个互补的晶体管实现推挽输出，在静态时几乎不消耗功率，理论最高效率78.5%</p>
<p>正半周过渡到负半周时产生交越失真。</p>
<p>3）AB类功放<br>
在B类功放基础上，为了减小交越失真，电路中增加了两个电阻和二极管，形成一种新的电路结构。</p>
<p>输入信号为0时，晶体管不再处于截止状态，而处于可控的微导通状态。二极管的导通压降和三极管发射结导通压降近似相等，电路输出近似为输入，但实际上，两个压降并不严格相同，交越失真仍是存在的，只是远比B类功放电路小很多。</p>
<p>4）Class D<br>
前述的所有放大器，当输入信号为正弦波时，其功率晶体管全部或者部分处于放大区，势必有自身的功率耗散，导致其效率无法再提高。<br>
D类功放：把输入信号调制成PWM波，Pulse Width Modulation，此时晶体管或完全导通（饱和），或完全关断（截止），几乎不消耗功率。最后利用LC二阶低通滤波器，将方波解调为输入信号幅度相关的波形。<br>
生成PWM波：将输入信号加载到高速比较器的正端，将高频三角波加载到比较器的负端，即可以输出PWM波。</p>
<p>无输出滤波型功率放大<br>
早期桥接负载形式直接将PWM波反向处理后分别接到功率驱动晶体管，负载桥接再两个输出端之间。差分输出波形显示出两个问题：一是信号翻转的落差很大，等于2VDD；二是脉冲宽度较大。这样的信号在载波及其谐波频率处带有较多能量，如果直接加在扬声器两端，不仅会降低效率，产生较大的EMI，而且较大的输出纹波会对扬声器造成损害。所以必须在输出级后加上滤波器，以储存输出的过多能量。<br>
针对上述传统PWM调制的弊端，新一代的PWM调制方式，在输入级将输入信号转换成相位相反的差分信号，分别通过调制器对其进行调制，再经过桥式输出，驱动扬声器。可以看到，新的PWM调制的输出波形相比较传统的输出波形，它的差分输出信号翻转落差只有一个VDD，而且脉宽比较小。这样的信号在载波及其谐波频率处携带的能量较少，利用扬声器自身的低通特性，便能够达到比较理想的滤波效果，从而实现了免滤波器输出的可能。所以，目前市场上都是新一代的PWM调制的免滤波D类功放结构。</p>
<p>Class D原理：</p>
<p>5）Class G<br>
Class-D amplifiers convert an input signal into a series of output pulses that switch between GND and supply voltages. This PWM output is the result of modulating the input signal with the duty cycle of the output pulses. The output stage of this type of amplifier can be implemented easily using a half H-bridge<br>
architecture for each output terminal.<br>
Internal power losses are minimized by never simultaneously turning on both high-side and low-side transistors which provides a significant boost to overall system efficiency compared to Class–A, Class-B, and Class-AB amplifiers. Often, this output switching may occur anywhere from hundreds of kHz to a few MHz. Driving this modulated signal through a low pass filter will remove the higher frequency content related to the output switching and will pass only the desired signal content to the load. Class-D amplifiers are ideal in audio applications given the relatively low frequency passband needed. This makes it easy to separate the audio signal from the output switching with very low distortion. Many modern audio Class-D amplifiers can utilize the inductance of the speaker coil itself to resolve the output waveform and allow the amp to operate without any external filtering between the output and the load. However, emissions standards often require that some EMI filtering be used to limit radiated noise.<br>
In a Class G system, the supply voltage for the Class D output is only boosted when needed. If the output exceeds a certain threshold then the boost will be enabled on and provide additional head room.</p>
<p>6）Class H<br>
Instead of having a single voltage, the boost level is variable. This enables the output to operate with just enable headroom to maintain low distortion while achieving the maximum output efficiency.</p>
<p>The major design trade-off when selecting which mode to operate depends on the available input current. Class-H mode will require greater current drive to be available from the battery in order to achieve the fast switching necessary. Class-G mode tends to be less demanding, but will not yield the same efficiency<br>
gains as Class-H.</p>
<p>Efficiency Comparison</p>
<p>功放的输出类型：<br>
a）变压器型<br>
b）OTL型：输出无变压器型（Output TransformerLess），用一个电容将直流电压输出隔离，仅输出交变信号，电容需很大才能保证功放的低频性能。<br>
c）OCL型：输出无电容型（Output CapacitorLess），能够改善低频性能，需使用双电源供电。<br>
d）BTL型：桥接负载（Bridge Tied Load）或平衡式无变压器（Balanced TransformerLess），也就是差分输出。输出功率是OCL电路的4倍。</p>
<p>2.2、DC-DC Boost电路</p>
<p>There are five main types of converters in the non-isolating group, usually called the buck, boost, buck-boost, Cuk and charge-pump converters.<br>
The buck converter is used for voltage step-down/reduction, while the boost converter is used for voltage step-up. The buck-boost and Cuk converters (The Cuk converter is named after its originator, Slobodan Cuk of Cal Tech university in California.) can be used for either step-down or step-up, but are essentially voltage polarity reversers or inverters as well.  The charge-pump converter is used for either voltage step-up or voltage inversion, but only in relatively low power applications.</p>
<p>1）Buck Converter</p>
<p>The basic circuit for a Buck type of DC-DC converter. How large Vout is as a proportion of Vin depends on the switching duty cycle for MOSFET Q1.</p>
<p>There are only four main components: switching power MOSFET Q1, flywheel diode D1, inductor L and output filter capacitor C1. A control circuit (often a<br>
single IC) monitors the output voltage, and maintains it at the desired level by switching Q1 on and off at a fixed rate (the converters operating frequency), but with a varying duty cycle (the proportion of each switching period that Q1 is turned on).<br>
When Q1 is turned on, current begins flowing from the input source through Q1 and L, and then into C1 and the load. The magnetic field in L therefore builds up, storing energy in the inductor with the voltage drop across L opposing or bucking part of the input voltage. Then when Q1 is turned off, the inductor opposes any drop in current by suddenly reversing its EMF, and now supplies current to the load itself via D1.</p>
<p>Switch Stages</p>
<p>where D is the duty cycle equal to</p>
<p>2）Boost Converter</p>
<p>The basic circuit for a Boost converter, which uses virtually the same components but arranged to step the voltage up rather than down. This time the voltage ratio depends on the proportion of the time that Q1 is off.</p>
<p>where D is the proportion of the switching cycle that Q1 is on.</p>
<p>3）Buck-Boost Converter</p>
<p>In the Buck-Boost converter, the components are used in yet another way, to provide either voltage stepup or stepdown but with polarity reversal or inversion as well.</p>
<p>4）Cuk Converter</p>
<p>The Cuk converter, which can again step the voltage either up or down, also inverting the polarity. In this case theres also less ripple at both input and output.</p>
<p>5）Charge-pump Converter</p>
<p>All of the converters we have looked at so far have depended for their operation on storing energy in the magnetic field of an inductor. However there is another type of converter which operates by storing energy as electric charge in a capacitor, instead. Converters of this type are usually called charge-pump converters, and they are a development from traditional voltage doubling and voltage multiplying rectifier circuits.<br>
The basic circuit for a voltage doubling charge-pump converter is shown in Fig.5, and as you can see, it mainly uses four MOSFET switches and a capacitor C1 usually called the charge bucket capacitor.<br>
Operation is fairly simple. First Q1 and Q4 are turned on, connecting C1 across the input source and allowing it to charge to Vin. Then these switches are turned off, and Q2 and Q3 are turned on instead. C1 is now connected in series with the input voltage source, across output reservoir capacitor C2. As a result some of the charge in C1 is transferred to C2, which charges to twice the input voltage. This cycle is repeated at a fairly high frequency, with C2 providing the load current during the part of the cycle when Q2 and Q3 are turned off.<br>
As you can see all of the energy supplied to the load in this type of converter flows through C1, and as ripple current. So again this capacitor needs to have a relatively high value, have low ESR (to minimise losses) and be able to cope with a heavy ripple current.<br>
On the whole, though, the fact that charge-pump converters rely for their operation on charge stored in a capacitor tends to limit them to relatively low current applications. However for this type of operation they are often cheaper and more compact than inductor-type converters.</p>
<p>2.3、SmartPA芯片内部框图</p>
<p>内部框图</p>
<p>1）电源模块<br>
VBAT：Boost模块供电<br>
VBST：Boost模块输出<br>
VDDP：Class D模块供电，当输出功率较低时，为提升系统效率，Boost模块将停用，VBAT直接供电<br>
VDDD：数字模块供电<br>
INB：Boost电感开关连接端，开关频率与输入信号采样率fs有关</p>
<p>2）数字接口<br>
I2S：BCK、SYNC、DIN、DOUT<br>
I2C：SCL、SDA<br>
INT/RST<br>
ADS1/ADS2</p>
<p>3）DC-DC Converter<br>
Boost模块通过DSP输出检测到音频信号幅值大小，DSP到Class D模块有一个时延tPD，正好在这个时间段内，Boost模块判断是否需要升压。</p>
<p>4）Current Sense<br>
通过采样Class D放大电路上两个小电阻的两端电压来计算流过喇叭的I。</p>
<p>5）功率电感&amp;输出电容</p>
<p>6）供应商芯片参考：<br>
NXP TFA9874芯片内部框图&amp;参考电路</p>
<p>Ti Tas2562芯片内部框图</p>
<p>2.4、关键性能规格</p>
<p>2.5、单元测试用例</p>

            </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://lc908.github.io/post/yin-pin-dian-lu/">
                  <h3 class="post-title">
                    Basics
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
